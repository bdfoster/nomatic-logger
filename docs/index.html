<!doctype html>
<html class="default no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>nomatic-logging</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
    <div class="tsd-page-toolbar">
        <div class="container">
            <div class="table-wrap">
                <div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
                    <div class="field">
                        <label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
                        <input id="tsd-search-field" type="text"/>
                    </div>
                    <ul class="results">
                        <li class="state loading">Preparing search index...</li>
                        <li class="state failure">The search index is not available</li>
                    </ul>
                    <a href="index.html" class="title">nomatic-logging</a>
                </div>
                <div class="table-cell" id="tsd-widgets">
                    <div id="tsd-filter">
                        <a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
                        <div class="tsd-filter-group">
                            <div class="tsd-select" id="tsd-filter-visibility">
                                <span class="tsd-select-label">All</span>
                                <ul class="tsd-select-list">
                                    <li data-value="public">Public</li>
                                    <li data-value="protected">Public/Protected</li>
                                    <li data-value="private" class="selected">All</li>
                                </ul>
                            </div>
                            <input type="checkbox" id="tsd-filter-inherited" checked/>
                            <label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
                            <input type="checkbox" id="tsd-filter-externals" checked/>
                            <label class="tsd-widget" for="tsd-filter-externals">Externals</label>
                            <input type="checkbox" id="tsd-filter-only-exported"/>
                            <label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
                        </div>
                    </div>
                    <a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
                </div>
            </div>
        </div>
    </div>
    <div class="tsd-page-title">
        <div class="container">
            <ul class="tsd-breadcrumb">
                <li>
                    <a href="globals.html">Globals</a>
                </li>
            </ul>
            <h1> nomatic-logging</h1>
        </div>
    </div>
</header>
<div class="container container-main">
    <div class="row">
        <div class="col-8 col-content">
            <div class="tsd-panel tsd-typography">
                <h1 id="nomatic-logging">nomatic-logging</h1>
                <p><a href="https://github.com/bdfoster/nomatic-logging/releases"><img
                        src="https://img.shields.io/github/release/bdfoster/nomatic-logging.svg"
                        alt="GitHub release"></a>
                    <a href="https://www.npmjs.com/package/nomatic-logging"><img
                            src="https://img.shields.io/npm/v/nomatic-logging.svg" alt="npm"></a>
                    <a href="https://travis-ci.org/bdfoster/nomatic-logging"><img
                            src="https://img.shields.io/travis/bdfoster/nomatic-logging/master.svg" alt="Build status"></a>
                    <a href="https://coveralls.io/github/bdfoster/nomatic-logging"><img
                            src="https://img.shields.io/coveralls/bdfoster/nomatic-logging/master.svg"
                            alt="Coverage Status"></a>
                    <a href="https://codeclimate.com/github/bdfoster/nomatic-logging"><img
                            src="https://img.shields.io/codeclimate/github/bdfoster/nomatic-logging/badges/gpa.svg"
                            alt="Code Climate"></a>
                    <a href="https://david-dm.org/bdfoster/nomatic-logging"><img
                            src="https://img.shields.io/david/bdfoster/nomatic-logging.svg"
                            alt="David dependencies"></a>
                    <a href="https://david-dm.org/bdfoster/nomatic-logging?type=dev"><img
                            src="https://img.shields.io/david/dev/bdfoster/nomatic-logging.svg"
                            alt="David devDependencies"></a>
                    <a href="https://github.com/bdfoster/nomatic-logging/blob/master/LICENSE"><img
                            src="https://img.shields.io/github/license/bdfoster/nomatic-logging.svg" alt="License"></a>
                </p>
                <p><strong>Get serious about logging.</strong> This library takes the best concepts of
                    <a href="https://github.com/winstonjs/winston">winston</a> and <a
                            href="https://github.com/trentm/node-bunyan">bunyan</a> to create a flexible
                    yet elegant logging solution for any Node.js library or application. You decide what to do with
                    generated logs by using
                    the included transports or creating your own, very easily. You can even decide how to manage logs
                    from your project&#39;s
                    dependencies (if they are using this library, of course). A log doesn&#39;t have to be just a
                    message, either. You can
                    data to the log message or have a message generated for you from the data via templates.</p>
                <h2 id="goals">Goals</h2>
                <ul>
                    <li><strong>Reliable</strong>: It should fail predictably, and with valid cause. Log data is
                        sensitive and important to determining the
                        status of the dependent application. This is done with extensive unit and integration testing
                        along with proper
                        semantic versioning.
                    </li>
                    <li><strong>Flexible</strong>: Each dependent package will use this in a different way. Design it in
                        a way that will fit most use
                        cases.
                    </li>
                    <li><strong>Elegant</strong>: It should be easy to get started, yet support complex use cases when
                        needed.
                    </li>
                    <li><strong>Fast</strong>: Logging is boring, but essential. Do what we need to do, quickly, and get
                        out of the way.
                    </li>
                </ul>
                <h2 id="installation">Installation</h2>
                <p>You can install from <a href="https://www.npmjs.com/package/nomatic-logging">npm</a> by doing:</p>
                <pre><code class="lang-bash">npm install --save nomatic-logging
</code></pre>
                <h2 id="basic-usage">Basic Usage</h2>
                <p>To get the default <code>Logger</code>:</p>
                <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> logger = <span
                        class="hljs-built_in">require</span>(<span class="hljs-string">'nomatic-logging'</span>);
</code></pre>
                <p>...which is equivalent to (if the namespace is not already taken):</p>
                <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Logger = <span
                        class="hljs-built_in">require</span>(<span class="hljs-string">'nomatic-logging'</span>).Logger;
<span class="hljs-keyword">const</span> transport = <span class="hljs-built_in">require</span>(<span
                            class="hljs-string">'nomatic-logging'</span>).transport;
<span class="hljs-keyword">const</span> logger = <span class="hljs-keyword">new</span> Logger(<span class="hljs-string">'root'</span>, {
    <span class="hljs-attr">transports</span>: [
        transport.console <span class="hljs-comment">// same as calling: new transport.Console({level: 'info'})</span>
    ]
});
</code></pre>
                <p>Now, <code>logger</code> has a name of <code>root</code> and a way to send logs of level
                    <code>info</code> and above to the console.</p>
                <p>Then, to use it:</p>
                <pre><code class="lang-javascript">logger.info(<span class="hljs-string">'test'</span>);
<span class="hljs-comment">// with data:</span>
logger.info(<span class="hljs-string">'test'</span>, {
    <span class="hljs-attr">isTest</span>: <span class="hljs-literal">true</span>
});
</code></pre>
                <p>You read that right. You can send data with your message. As a matter of fact, you can just send data
                    with your log and
                    have the <code>Logger</code> parse it into a message for you:</p>
                <pre><code class="lang-javascript">logger.template = <span class="hljs-string">'{method} {url} {status} {length} {ms}'</span>;
logger.info({
    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/path/to/resource'</span>,
    <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">length</span>: <span class="hljs-string">'1214'</span>,
    <span class="hljs-attr">ms</span>: <span class="hljs-number">22</span>
});
</code></pre>
                <p>To listen for all entries generated on <code>logger</code>:</p>
                <pre><code class="lang-javascript">logger.on(<span class="hljs-string">'entry'</span>, (entry) =&gt; {
    <span class="hljs-comment">/* `entry` is an object with `namespace`, `message`, `level`,
    * `hostname`, `createdAt`, and optional `data` fields.
    */</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span
                            class="hljs-subst">${entry.level}</span>]\t<span class="hljs-subst">${entry.message}</span>`</span>);
});
</code></pre>
                <p>To listen for the &#39;info&#39; log level entries:</p>
                <pre><code class="lang-javascript">logger.on(<span class="hljs-string">'info'</span>, (entry) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[INFO]\t<span class="hljs-subst">${entry.message}</span>`</span>);
});
</code></pre>
                <p>Because we are using <code>EventEmitter</code> from <a
                        href="https://www.npmjs.com/package/nomatic-events"><code>nomatic-events</code></a>, you can
                    also use a regex:</p>
                <pre><code class="lang-javascript">logger.on(<span class="hljs-regexp">/(info|debug)/</span>, (entry) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`[<span
                            class="hljs-subst">${entry.level}</span>]\t<span class="hljs-subst">${entry.message}</span>`</span>);
})
</code></pre>
                <p>You can create your own transport very easily:</p>
                <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Transport = <span
                        class="hljs-built_in">require</span>(<span class="hljs-string">'nomatic-logging'</span>).Transport;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseTransport</span> <span
        class="hljs-keyword">extends</span> <span class="hljs-title">Transport</span> </span>{
    public execute(entry) {
        <span class="hljs-comment">/// do something here</span>
    }
}

<span class="hljs-keyword">const</span> myTransport = <span class="hljs-keyword">new</span> DatabaseTransport({
    <span class="hljs-attr">level</span>: <span class="hljs-string">'debug'</span>
});
</code></pre>
                <p>You can send log entries to a database, a file, a remote server, whatever you want. This is where
                    <code>nomatic-logging</code>
                    becomes very powerful, and not just a complicated replacement for <code>console.log()</code>.</p>
                <p>You can then subscribe <code>myTransport</code> to a logger:</p>
                <pre><code class="lang-javascript">logger.use(myTransport);
</code></pre>
                <p>A log <code>entry</code> object looks like this:</p>
                <pre><code class="lang-typescript"><span class="hljs-keyword">interface</span> Entry {
  <span class="hljs-keyword">namespace</span>?: <span class="hljs-built_in">string</span>;
  level: <span class="hljs-built_in">string</span>;
  message: <span class="hljs-built_in">string</span>;
  createdAt: <span class="hljs-built_in">Date</span>;
  hostname: <span class="hljs-built_in">string</span>;
  data?: <span class="hljs-built_in">Object</span>;
}
</code></pre>
                <p>As you can see, the only two properties that are optional are <code>namespace</code> and
                    <code>data</code>. <code>namespace</code> is optional because
                    it is optional in the <code>Logger</code> class. You can use the <code>Logger</code> class directly,
                    and potentially export it as part of your
                    library or module:</p>
                <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> Logger = logging.Logger;
<span class="hljs-built_in">module</span>.exports.logger = <span class="hljs-keyword">new</span> Logger();
</code></pre>
                <p>The <code>Logger</code> class uses no transport(s) by default. You can specify one (or more) when
                    instantiating or do:</p>
                <pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports.logger.configure({
    <span class="hljs-attr">transports</span>: [
        logging.transport.console,
        myTransport,
    ] 
});
</code></pre>
                <p>This will override properties at a top-level basis (i.e. if you specify <code>transports</code>, any
                    other transports specified
                    will no longer be used by the logger).</p>
                <p>Anything you can configure via <code>configure</code>, you can pass on instantiation:</p>
                <pre><code class="lang-javascript"><span class="hljs-keyword">const</span> myLogger = <span
                        class="hljs-keyword">new</span> Logger({
    <span class="hljs-attr">transports</span>: [
        logging.transport.console,
        myTransport,
    ]
});
</code></pre>
                <p>A logger can also have child loggers:</p>
                <pre><code class="lang-javascript">logger.create(<span class="hljs-string">'app'</span>);
</code></pre>
                <p>...which have all the same levels and transports of the parent. If you try to create another logger
                    with the same name
                    on this parent, it will throw an exception. When you configure the parent, the parent will push the
                    same configuration
                    all child loggers.</p>
                <p>Loggers also have a <code>get</code> method, which will either return a logger or create one if it
                    does not exist:</p>
                <pre><code class="lang-javascript">logger.get(<span class="hljs-string">'app'</span>); <span
                        class="hljs-comment">// returns the previously created Logger instance of the same name</span>
logger.get(<span class="hljs-string">'app2'</span>); <span class="hljs-comment">// creates then returns a Logger instance with `name` of 'app2'</span>
</code></pre>
                <h2 id="typescript">TypeScript</h2>
                <p>This library is developed with <a href="http://www.typescriptlang.org/">TypeScript</a>, and as such,
                    includes definitions.
                    However, you do not even need to know what TypeScript is to use this package. The compiled project
                    is included in the
                    <a href="http://npmjs.com/package/nomatic-logging">npm package</a>.</p>
                <h2 id="testing">Testing</h2>
                <p>You can run tests by doing:</p>
                <pre><code class="lang-bash">npm <span class="hljs-built_in">test</span>
</code></pre>
                <p>A summary of code coverage shows up at the end of the output, but if you want the HTML site, do:</p>
                <pre><code class="lang-bash">npm run coverage
</code></pre>
                <p>I do strive for 100% code coverage since this is a very small library. I would ask for the same when
                    submitting a PR.
                    If you need help with writing tests, ping me and I will either write them for you (if it&#39;s small
                    enough) or give you
                    guidance on how to do so.</p>
                <h2 id="future-plans">Future Plans</h2>
                <ul>
                    <li>Make usable in both Node.js and the browser (currently only supported in Node.js)</li>
                    <li>Add more transports (either included in the main project or as plugins), including:
                        <ul>
                            <li>HTTP (sending log entries via JSON or text to a remote server)</li>
                            <li>File (with log-rotate capabilities)</li>
                            <li>Node.js streams</li>
                        </ul>
                    </li>
                    <li>Improve test cases, remove clutter, etc. to build even more confidence in the project</li>
                </ul>
                <h2 id="contributing-support">Contributing / Support</h2>
                <p>Please note that this software is in the early stages of development, but is in production use in
                    several of my
                    personal projects and university/work endeavors.</p>
                <p>Pull requests are absolutely welcome, and issues can be raised for questions or bugs. I do understand
                    the documentation is a
                    little sparse at the moment, and I&#39;m certainly working to expand that very, very soon. If you
                    need help using the
                    library, submit an issue for it and I&#39;ll be sure to document it (first in the issue itself, then
                    in the actual
                    documentation).</p>
                <p>Please remember that this is something I maintain and build upon in my spare time. If you need paid
                    support for a
                    particular solution, feature, or bug, please feel free to send me a message. Generally speaking, I&#39;m
                    very responsive
                    during the work week.</p>
            </div>
        </div>
        <div class="col-4 col-menu menu-sticky-wrap menu-highlight">
            <nav class="tsd-navigation primary">
                <ul>
                    <li class="globals  ">
                        <a href="globals.html"><em>Globals</em></a>
                    </li>
                </ul>
            </nav>
            <nav class="tsd-navigation secondary menu-sticky">
                <ul class="before-current">
                    <li class=" tsd-kind-class">
                        <a href="classes/console.html" class="tsd-kind-icon">Console</a>
                    </li>
                    <li class=" tsd-kind-class">
                        <a href="classes/logger.html" class="tsd-kind-icon">Logger</a>
                    </li>
                    <li class=" tsd-kind-class">
                        <a href="classes/transport.html" class="tsd-kind-icon">Transport</a>
                    </li>
                    <li class=" tsd-kind-interface">
                        <a href="interfaces/consoleoptions.html" class="tsd-kind-icon">Console
                            <wbr>
                            Options</a>
                    </li>
                    <li class=" tsd-kind-interface">
                        <a href="interfaces/entry.html" class="tsd-kind-icon">Entry</a>
                    </li>
                    <li class=" tsd-kind-interface">
                        <a href="interfaces/levels.html" class="tsd-kind-icon">Levels</a>
                    </li>
                    <li class=" tsd-kind-interface">
                        <a href="interfaces/loggeroptions.html" class="tsd-kind-icon">Logger
                            <wbr>
                            Options</a>
                    </li>
                    <li class=" tsd-kind-interface">
                        <a href="interfaces/transportoptions.html" class="tsd-kind-icon">Transport
                            <wbr>
                            Options</a>
                    </li>
                    <li class=" tsd-kind-type-alias">
                        <a href="globals.html#transporthandler" class="tsd-kind-icon">Transport
                            <wbr>
                            Handler</a>
                    </li>
                    <li class=" tsd-kind-variable">
                        <a href="globals.html#console" class="tsd-kind-icon">console</a>
                    </li>
                    <li class=" tsd-kind-variable">
                        <a href="globals.html#transport" class="tsd-kind-icon">transport</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>
<footer>
    <div class="container">
        <h2>Legend</h2>
        <div class="tsd-legend-group">
            <ul class="tsd-legend">
                <li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
                <li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
                <li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
                <li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
                <li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span>
                </li>
                <li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
                <li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
                <li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
                <li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
                <li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
                <li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span>
                </li>
                <li class="tsd-kind-constructor tsd-parent-kind-interface"><span
                        class="tsd-kind-icon">Constructor</span></li>
                <li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
                <li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
                <li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span>
                </li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
                <li class="tsd-kind-class tsd-has-type-parameter"><span
                        class="tsd-kind-icon">Class with type parameter</span></li>
                <li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span>
                </li>
                <li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
                <li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
                <li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
                <li class="tsd-kind-index-signature tsd-parent-kind-class"><span
                        class="tsd-kind-icon">Index signature</span></li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span>
                </li>
                <li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span>
                </li>
                <li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span>
                </li>
                <li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span>
                </li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span>
                </li>
                <li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span>
                </li>
                <li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span>
                </li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span>
                </li>
                <li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span>
                </li>
                <li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span>
                </li>
            </ul>
            <ul class="tsd-legend">
                <li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span>
                </li>
                <li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span>
                </li>
            </ul>
        </div>
    </div>
</footer>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>